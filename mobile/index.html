<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title></title>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="">
<link rel="shortcut icon" href="">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>

<button id="vibrate" >push</button>
<div id="view"></div>

<script>
  $(document).ready(function() {
    addListeners();
});
 
// time per tick is 200 ms
var T = 200;
 
function addListeners() {
    $("#vibrate").click(function() {
        $("#vibrate").html("pushed");
        var morsecode=".... - -- .-.. .....|.-. ..- .-.. . ...";
        var toPlay = playMorseCode(morsecode);
        $("#view").html(JSON.stringify(toPlay));
        navigator.Vibrate(toPlay);
    });
}
 
function playMorseCode(code) {
 
    var arrayToPlay = [];
 
    for(i=0; i<code.length ; i++) {
        var char = code.charAt(i);
        // we first check if the code we received is a "."
        if (char == '.') {
            // add vibrate of 1T
            arrayToPlay.push(T);
        } else if (char == '-') {
            // add vibrate of 3T
            arrayToPlay.push(3*T);
        } else if (char == ' ') {
            // add pause of 3T
            arrayToPlay.push(3*T);
        } else if (char == '|') {
            arrayToPlay.push(7*T);
        }
 
        // we might need to add a spacer if the next character is either a "." or a "-"
        // and the current char is either a "." or a "-"
        if (((i + 1) < code.length)
            && (code.charAt(i) == "." || code.charAt(i) == "-")
            && (code.charAt(i+1) == "." || code.charAt(i+1) == "-")) {
            arrayToPlay.push(T);
        }
    }
 
    return arrayToPlay;
}
</script>
</body>
</html>
