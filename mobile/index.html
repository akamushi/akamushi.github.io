<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title></title>
<meta charset="utf-8">
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="">
<link rel="shortcut icon" href="">
<style>
  body {
    background-color: orange;
  }
</style>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>
<body>

<input type="text" id="text" value="hoge" >
<br />
<br />
<button id="vibrate" >push</button>
<br />
<div id="view"></div>

<script>
  $(document).ready(function() {
    addListeners();
});
 
// time per tick is 200 ms
var T = 200;
 
function addListeners() {
    $("#vibrate").click(function() {
        $("#vibrate").html("pushed");
        //var morsecode=".... ";
        var morsecode = conv($("#text").val());
        var toPlay = playMorseCode(morsecode);
        $("#view").html(JSON.stringify(morsecode));
        navigator.vibrate(toPlay);
        //navigator.vibrate(1000);
    });
}
 
function playMorseCode(codes) {
 
    var arrayToPlay = [];
    for(var j=0;j<codes.length;j++){
      var code=codes[j];
      for(i=0; i<code.length ; i++) {
        var char = code[i];
        // we first check if the code we received is a "."
        if (char == '0') {
            // add vibrate of 1T
            arrayToPlay.push(T);
        } else if (char == '1') {
            // add vibrate of 3T
            arrayToPlay.push(2*T);
        }
      }
      arrayToPlay.push(300);
   
    }
 
    return arrayToPlay;
}
var dict = {
    "a":"10111",
    "b":"111010101",
    "c":"11101011101",
    "d":"1110101",
    "e":"1",
    "f":"101011101",
    "g":"111011101",
    "h":"1010101",
    "i":"101",
    "j":"1011101110111",
    "k":"111010111",
    "l":"101110101",
    "m":"1110111",
    "n":"11101",
    "o":"11101110111",
    "p":"10111011101",
    "q":"1110111010111",
    "r":"1011101",
    "s":"10101",
    "t":"111",
    "u":"1010111",
    "v":"101010111",
    "w":"101110111",
    "x":"11101010111",
    "y":"1110101110111",
    "z":"11101110101",
    "1":"10111011101110111",
    "2":"101011101110111",
    "3":"1010101110111",
    "4":"10101010111",
    "5":"101010101",
    "6":"11101010101",
    "7":"1110111010101",
    "8":"111011101110101",
    "9":"11101110111011101",
    "0":"1110111011101110111",
    ".":"10111010111010111",
    ",":"1110111010101110111",
    "?":"101011101110101",
    "!":"1110101110101110111",
    "-":"111010101010111",
    "/":"1110101011101",
    "@":"10111011101011101",
    "(":"111010111011101",
    ")":"1110101110111010111",
    " ":"0"
}

function conv(word_str){
    var strs = word_str.toLowerCase().split('');
    var rtn =[];
    for(var i =0;i<=strs.length-1;i++){
        if(dict[strs[i]]===undefined){
        }else{
            rtn.push(dict[strs[i]]);
        }
    }
    return rtn;
}
</script>
</body>
</html>
